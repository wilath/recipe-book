<!-- 
    [routerLink]="[index]"

-->
<div>
  <div class="post">
    <div class="image-wrap">
    <a (click)="onNavigateToRecipeDetails()" ><img class="recipe-image" [src]="recipe.images[0].url" alt="recipe" /></a>
    </div>
    <div class="recipe-title">
      <a class="go-to-recipe" (click)="onNavigateToRecipeDetails()">{{ recipe.name }}</a>
      
    </div>
    <div class="recipe-info">
      <div class="stars info-part">
        <div class="stars-container">
          <div class="rating-upper" [ngStyle]="{'width': totalRatePercentage + '%'}">
            <span><i class="fa-solid fa-star"></i></span>
            <span><i class="fa-solid fa-star"></i></span>
            <span><i class="fa-solid fa-star"></i></span>
            <span><i class="fa-solid fa-star"></i></span>
            <span><i class="fa-solid fa-star"></i></span>
          </div>
          <div class="rating-lower">
            <span><i class="fa-solid fa-star"></i></span>
            <span><i class="fa-solid fa-star"></i></span>
            <span><i class="fa-solid fa-star"></i></span>
            <span><i class="fa-solid fa-star"></i></span>
            <span><i class="fa-solid fa-star"></i></span>
          </div>

          <div class="star-picker">
            <form>
            <label [for]="recipe.name +'star1'"><i class="fa-solid fa-star"></i><input value="1" [name]="recipe.name +'star'" [id]="recipe.name +'star1'" type="radio" [(ngModel)]="rateByCurrentUser " (change)="onRateRecipe($event)"></label>
            
            <label [for]="recipe.name +'star2'"><i class="fa-solid fa-star"></i><input value="2" [name]="recipe.name +'star'" [id]="recipe.name +'star2'" type="radio" [(ngModel)]="rateByCurrentUser" (change)="onRateRecipe($event)"></label>
            
            <label [for]="recipe.name +'star3'"><i class="fa-solid fa-star"></i><input value="3" [name]="recipe.name +'star'" [id]="recipe.name +'star3'" type="radio" [(ngModel)]="rateByCurrentUser" (change)="onRateRecipe($event)"></label>
            
            <label [for]="recipe.name +'star4'"><i class="fa-solid fa-star"></i><input value="4" [name]="recipe.name +'star'" [id]="recipe.name +'star4'" type="radio" [(ngModel)]="rateByCurrentUser" (change)="onRateRecipe($event)"></label>
            
            <label [for]="recipe.name +'star5'"><i class="fa-solid fa-star"></i><input value="5" [name]="recipe.name +'star'" [id]="recipe.name +'star5'" type="radio" [(ngModel)]="rateByCurrentUser" (change)="onRateRecipe($event)"></label>           
          </form>
          </div>
         
        </div>
        {{recipe.stars.length ? recipe.stars.length : 0}}
      </div>
      <div class="info-part">
        <app-levels [level]="recipe.level" class="mb-02rem"></app-levels>
        
        {{ recipe.level }}
      </div>
      <div class="info-part">
        <app-clock class="mb-02rem"></app-clock>
        {{ recipe.prepTimeMinutes }} min.
      </div>
    </div>
    <div class="user-info">
      <div class="user-data">
        <img src="https://t3.ftcdn.net/jpg/05/53/79/60/360_F_553796090_XHrE6R9jwmBJUMo9HKl41hyHJ5gqt9oz.jpg" alt="avatar" />
        <h4>{{ recipe.author | authorname }}</h4>
      </div>
      <div class="recipe-actions">
        <button  (click)="onLike()">
          {{ recipe.likes.quantity }}
          <i
            [ngClass]="{ 'recipe-liked': isLikedByCurrentUser }"
            class="heart fa-solid fa-heart"
          ></i>
        </button>
          @if (recipe.author !== user.email) {
            <button (click)="onFollowUser()">
              <i
                [ngClass]="{ 'user-followed': isFollowedByCurrentUser }"
                class="fa-solid fa-user-plus"
              ></i>
            </button>
          }
       
      </div>
    </div>
  </div>
</div>
